---
weight: 15
---

# Install

## Prerequisites

- ACP version: >= v4.2
- AC CLI version: >= v1.1
- This plugin must be installed before the global cluster failure occurs.

## Download and Import

1. Login to AlaudaCloud and download the latest Alauda Container Platform Cluster Authentication plugin package.

2. Use violet to push the Alauda Container Platform Cluster Authentication plugin to ACP:

   ```bash
      violet push <plugin-name>.amd64.<version>.tgz \
      --platform-address https://<platform-address>/ \
      --platform-username <username> \
       --platform-password '<password>'
   ``` 

## Install via Web Console

1. Verify the upload:

   - Navigate to Administrator > Marketplace > Upload Packages
   - Switch to the Cluster Plugin tab
   - Locate the uploaded plugin name
   - The plugin details will show the version(s) of the uploaded package

2. Install the plugin:

   - If the plugin shows a "ready" status, click Install

## Install via CLI

### 1. Check Available Versions

Ensure the plugin has been published by checking for ModulePlugin and ModuleConfig resources in the `global` cluster:

```shell
# kubectl get moduleplugins |grep local-auth
NAME      AGE
local-auth           5d17h

# kubectl get moduleconfigs -l cpaas.io/module-name=local-auth 
NAME                                                   AGE
local-auth    3d22h
```

This indicates that the ModulePlugin `local-auth` exists in the cluster and is available for installation.

### 2. Create a ModuleInfo

Create a ModuleInfo resource to install the plugin. The following example includes common configuration parameters:

```yaml
apiVersion: cluster.alauda.io/v1alpha1
kind: ModuleInfo
metadata:
  annotations:
    cpaas.io/display-name: local-auth
    cpaas.io/module-name: '{"en": "Alauda Container Platform Cluster Authentication", "zh": "Alauda Container Platform Cluster Authentication"}'
  labels:
    cpaas.io/cluster-name: <cluster-name>   # target cluster name
    cpaas.io/module-name: local-auth
    cpaas.io/module-type: plugin
    cpaas.io/product: Platform-Center
  name: local-auth-<cluster-name>           # resource name
spec:
  version: v1.0.0                           # plugin version
```

### Field Explanations

**Metadata Fields:**

* `name`: Temporary name for the cluster plugin. The platform will rename it after creation based on the content, in the format `<cluster-name>-<hash of content>`, e.g., `global-ee98c9991ea1464aaa8054bdacbab313`.
* `label cpaas.io/cluster-name`: Specifies the cluster where the plugin should be installed.
* `label cpaas.io/module-name`: Plugin name, must match the ModulePlugin resource.
* `label cpaas.io/module-type`: Fixed field, must be `plugin`; missing this field causes installation failure.

**Spec Fields:**

* `.spec.version`: Specifies the plugin version to install, must match `.spec.version` in ModuleConfig.